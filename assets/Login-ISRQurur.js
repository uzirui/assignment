import{_ as U,p as B,r as f,k as L,j as S,c as h,a as r,f as E,m as I,b as s,e as t,w as l,i as n,d as K,h as k,n as M,E as _}from"./index-CIru5doz.js";const T={class:"login-page"},j={class:"login-container"},F={class:"form-options"},J={class:"login-footer"},O={__name:"Login",setup(P){const g=K(),u=L(),V=B(),o=f({username:"",password:"",remember:!1});u.query.username&&(o.value.username=u.query.username);const p=f(!1),x={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在3-20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度应在6-20个字符之间",trigger:"blur"}]},c=f(null),v=S(()=>V.error),y=async()=>{c.value&&await c.value.validate(async b=>{if(b){p.value=!0;try{const i=JSON.parse(localStorage.getItem("users")||"{}")[o.value.username];if(!i)_.error("该用户未注册");else if(i.password!==o.value.password)_.error("密码错误");else{_.success("登录成功");const m=u.query.redirect||"/";g.push(m)}}finally{p.value=!1}}})},q=()=>{g.push({path:"/register",query:u.query})};return(b,e)=>{const i=t("el-alert"),m=t("el-input"),d=t("el-form-item"),C=t("el-checkbox"),w=t("el-link"),N=t("el-button"),R=t("el-form");return k(),h("div",T,[r("div",j,[e[8]||(e[8]=r("div",{class:"login-header"},[r("h2",{class:"title"},"登录"),r("p",{class:"subtitle"},"登录您的账号以继续访问")],-1)),v.value?(k(),E(i,{key:0,title:v.value,type:"error","show-icon":"",class:"login-error"},null,8,["title"])):I("",!0),s(R,{ref_key:"formRef",ref:c,model:o.value,rules:x,"label-position":"top",class:"login-form"},{default:l(()=>[s(d,{label:"用户名",prop:"username"},{default:l(()=>[s(m,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.username=a),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(d,{label:"密码",prop:"password"},{default:l(()=>[s(m,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.password=a),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":"",onKeyup:M(y,["enter"])},null,8,["modelValue"])]),_:1}),s(d,null,{default:l(()=>[r("div",F,[s(C,{modelValue:o.value.remember,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.remember=a)},{default:l(()=>e[3]||(e[3]=[n("记住我")])),_:1},8,["modelValue"]),s(w,{type:"primary",underline:!1},{default:l(()=>e[4]||(e[4]=[n("忘记密码?")])),_:1})])]),_:1}),s(d,null,{default:l(()=>[s(N,{type:"primary",loading:p.value,class:"login-button",onClick:y},{default:l(()=>e[5]||(e[5]=[n(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),r("div",J,[r("p",null,[e[7]||(e[7]=n(" 还没有账号？ ")),s(w,{type:"primary",underline:!1,onClick:q},{default:l(()=>e[6]||(e[6]=[n(" 立即注册 ")])),_:1})])])])])}}},A=U(O,[["__scopeId","data-v-740ef528"]]);export{A as default};
