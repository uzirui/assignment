import{_ as U,p as C,r as v,j as E,c as B,a as d,f as N,m as L,b as s,e as n,w as o,i as u,d as A,k as F,h as b,n as K}from"./index-j3DZukop.js";const M={class:"register-page"},S={class:"register-container"},T={class:"register-footer"},j={__name:"Register",setup(I){const c=A(),w=F(),_=C(),r=v({username:"",email:"",password:"",confirmPassword:"",agreement:!1}),f=v(!1),x={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在3-20个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,validator:(m,e,l)=>{var t;e===""?l(new Error("请输入密码")):(r.value.confirmPassword!==""&&((t=p.value)==null||t.validateField("confirmPassword")),l())},trigger:"blur"},{min:6,max:20,message:"密码长度应在6-20个字符之间",trigger:"blur"}],confirmPassword:[{required:!0,validator:(m,e,l)=>{e===""?l(new Error("请再次输入密码")):e!==r.value.password?l(new Error("两次输入密码不一致")):l()},trigger:"blur"}],agreement:[{validator:(m,e,l)=>{e?l():l(new Error("您必须同意用户协议才能注册"))},trigger:"change"}]},p=v(null),y=E(()=>_.error),V=async()=>{p.value&&await p.value.validate(async m=>{if(m){f.value=!0;try{if(await _.register({username:r.value.username,email:r.value.email,password:r.value.password})){const l=w.query.redirect||"/";c.push(l)}}finally{f.value=!1}}})},P=()=>{c.push({path:"/login",query:w.query})};return(m,e)=>{const l=n("el-alert"),t=n("el-input"),i=n("el-form-item"),g=n("el-link"),k=n("el-checkbox"),q=n("el-button"),R=n("el-form");return b(),B("div",M,[d("div",S,[e[12]||(e[12]=d("div",{class:"register-header"},[d("h2",{class:"title"},"注册"),d("p",{class:"subtitle"},"创建您的账号以访问全部功能")],-1)),y.value?(b(),N(l,{key:0,title:y.value,type:"error","show-icon":"",class:"register-error"},null,8,["title"])):L("",!0),s(R,{ref_key:"formRef",ref:p,model:r.value,rules:x,"label-position":"top",class:"register-form"},{default:o(()=>[s(i,{label:"用户名",prop:"username"},{default:o(()=>[s(t,{modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.username=a),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(i,{label:"邮箱",prop:"email"},{default:o(()=>[s(t,{modelValue:r.value.email,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.email=a),placeholder:"请输入邮箱地址","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(i,{label:"密码",prop:"password"},{default:o(()=>[s(t,{modelValue:r.value.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.password=a),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[s(t,{modelValue:r.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.value.confirmPassword=a),type:"password",placeholder:"请再次输入密码","prefix-icon":"Lock","show-password":"",onKeyup:K(V,["enter"])},null,8,["modelValue"])]),_:1}),s(i,{prop:"agreement"},{default:o(()=>[s(k,{modelValue:r.value.agreement,"onUpdate:modelValue":e[4]||(e[4]=a=>r.value.agreement=a)},{default:o(()=>[e[7]||(e[7]=u(" 我已阅读并同意 ")),s(g,{type:"primary",underline:!1},{default:o(()=>e[5]||(e[5]=[u("用户协议")])),_:1}),e[8]||(e[8]=u(" 和 ")),s(g,{type:"primary",underline:!1},{default:o(()=>e[6]||(e[6]=[u("隐私政策")])),_:1})]),_:1},8,["modelValue"])]),_:1}),s(i,null,{default:o(()=>[s(q,{type:"primary",loading:f.value,class:"register-button",onClick:V},{default:o(()=>e[9]||(e[9]=[u(" 注册 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),d("div",T,[d("p",null,[e[11]||(e[11]=u(" 已有账号？ ")),s(g,{type:"primary",underline:!1,onClick:P},{default:o(()=>e[10]||(e[10]=[u(" 立即登录 ")])),_:1})])])])])}}},J=U(j,[["__scopeId","data-v-6868c975"]]);export{J as default};
