import{_ as J,j as L,r as v,o as O,k as W,l as R,c as u,a as t,m as X,b as l,w as d,n as Y,e as o,f as k,F as q,g as b,d as Z,h as n,u as Q,s as ee,i as B,t as p}from"./index-CIru5doz.js";import{u as te}from"./article-V0l2JBZU.js";const ae={class:"article-list-page"},se={class:"filter-container"},le={class:"search-box"},oe={class:"tag-filter"},ne={class:"tag-list"},ce={class:"article-list-container"},ie={key:1,class:"empty-state"},re={key:2,class:"article-list"},ue=["onClick"],de={class:"article-content"},_e={class:"article-title"},ve={class:"article-summary"},pe={class:"article-meta"},me={class:"meta-left"},ge={class:"author-name"},he={class:"publish-date"},fe={class:"article-tags"},ye={class:"article-image"},ke={class:"image-placeholder"},qe={key:0,class:"pagination-container"},be={__name:"ArticleList",setup(Ce){const C=Z(),i=W(),g=te(),A=L(()=>g.articles),V=L(()=>g.totalArticles),s=v(1),S=v(10),h=v(!1),r=v(""),c=v(""),D=v([{name:"全部",value:""},{name:"技术",value:"技术"},{name:"前端",value:"前端"},{name:"Vue",value:"Vue"},{name:"React",value:"React"},{name:"后端",value:"后端"},{name:"数据库",value:"数据库"},{name:"设计",value:"设计"},{name:"产品",value:"产品"},{name:"职场",value:"职场"},{name:"标签1",value:"标签1"},{name:"标签2",value:"标签2"}]);O(()=>{i.query.q&&(r.value=i.query.q),i.query.tag&&(c.value=i.query.tag),i.query.page&&(s.value=Number(i.query.page)),m()}),R(()=>i.query,e=>{e.q!==void 0&&e.q!==r.value&&(r.value=e.q||""),e.tag!==void 0&&e.tag!==c.value&&(c.value=e.tag||""),e.page!==void 0&&Number(e.page)!==s.value&&(s.value=Number(e.page)||1),m()},{deep:!0}),R(s,()=>{f(),m()});const m=async()=>{h.value=!0;try{await g.fetchArticles({page:s.value,limit:S.value,search:r.value,tag:c.value})}catch(e){console.error("获取文章列表失败:",e)}finally{h.value=!1}},x=()=>{s.value=1,f(),m()},P=e=>{c.value=e,s.value=1,f(),m()},T=e=>{s.value=e},f=()=>{const e={...i.query};r.value?e.q=r.value:delete e.q,c.value?e.tag=c.value:delete e.tag,s.value>1?e.page=s.value.toString():delete e.page,C.replace({query:e})},K=e=>{C.push(`/article/${e}`)};return(e,_)=>{const N=o("el-icon"),$=o("el-button"),F=o("el-input"),z=o("el-tag"),j=o("el-scrollbar"),E=o("el-skeleton"),I=o("el-empty"),M=o("el-avatar"),U=o("Picture"),w=o("el-image"),G=o("el-pagination");return n(),u("div",ae,[_[2]||(_[2]=t("div",{class:"page-header"},[t("h1",{class:"page-title"},"文章列表"),t("p",{class:"page-description"},"探索精彩的文章内容")],-1)),t("div",se,[t("div",le,[l(F,{modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=a=>r.value=a),placeholder:"搜索文章",clearable:"",onKeyup:Y(x,["enter"])},{append:d(()=>[l($,{onClick:x},{default:d(()=>[l(N,null,{default:d(()=>[l(Q(ee))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",oe,[l(j,null,{default:d(()=>[t("div",ne,[(n(!0),u(q,null,b(D.value,a=>(n(),k(z,{key:a.value,type:c.value===a.value?"primary":"info",effect:c.value===a.value?"dark":"plain",class:"tag-item",onClick:y=>P(a.value)},{default:d(()=>[B(p(a.name),1)]),_:2},1032,["type","effect","onClick"]))),128))])]),_:1})])]),t("div",ce,[h.value?(n(),k(E,{key:0,rows:10,animated:""})):A.value.length===0?(n(),u("div",ie,[l(I,{description:"没有找到相关文章"})])):(n(),u("div",re,[(n(!0),u(q,null,b(A.value,a=>(n(),u("div",{key:a.id,class:"article-item",onClick:y=>K(a.id)},[t("div",de,[t("h2",_e,p(a.title),1),t("p",ve,p(a.summary),1),t("div",pe,[t("div",me,[l(M,{size:24,src:a.author.avatar},null,8,["src"]),t("span",ge,p(a.author.username),1),t("span",he,p(new Date(a.createdAt).toLocaleDateString()),1)]),_[1]||(_[1]=t("div",{class:"meta-right"},null,-1))]),t("div",fe,[(n(!0),u(q,null,b(a.tags,(y,H)=>(n(),k(z,{key:H,size:"small",class:"article-tag"},{default:d(()=>[B(p(y),1)]),_:2},1024))),128))])]),t("div",ye,[l(w,{src:a.cover,fit:"cover"},{error:d(()=>[t("div",ke,[l(N,null,{default:d(()=>[l(U)]),_:1})])]),_:2},1032,["src"])])],8,ue))),128))]))]),V.value>0?(n(),u("div",qe,[l(G,{background:"",layout:"prev, pager, next",total:V.value,"page-size":S.value,"current-page":s.value,onCurrentChange:T},null,8,["total","page-size","current-page"])])):X("",!0)])}}},Se=J(be,[["__scopeId","data-v-362131d0"]]);export{Se as default};
