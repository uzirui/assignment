import{_ as U,p as N,r as v,j as S,c as q,a as d,f as C,m as B,b as s,e as n,w as l,i as u,d as I,k as L,h as y,n as M,E as V}from"./index-CIru5doz.js";const A={class:"register-page"},F={class:"register-container"},J={class:"register-footer"},K={__name:"Register",setup(O){const b=I();L();const x=N(),r=v({username:"",email:"",password:"",confirmPassword:"",agreement:!1}),f=v(!1),P={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在3-20个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,validator:(m,e,a)=>{var t;e===""?a(new Error("请输入密码")):(r.value.confirmPassword!==""&&((t=p.value)==null||t.validateField("confirmPassword")),a())},trigger:"blur"},{min:6,max:20,message:"密码长度应在6-20个字符之间",trigger:"blur"}],confirmPassword:[{required:!0,validator:(m,e,a)=>{e===""?a(new Error("请再次输入密码")):e!==r.value.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}],agreement:[{validator:(m,e,a)=>{e?a():a(new Error("您必须同意用户协议才能注册"))},trigger:"change"}]},p=v(null),c=S(()=>x.error),w=async()=>{p.value&&await p.value.validate(async m=>{if(m){f.value=!0;try{const e=JSON.parse(localStorage.getItem("users")||"{}");e[r.value.username]?V.error("用户名已存在"):(e[r.value.username]={password:r.value.password,email:r.value.email},localStorage.setItem("users",JSON.stringify(e)),V.success("注册成功，请登录"),_())}finally{f.value=!1}}})},_=()=>{b.push({path:"/login",query:{username:r.value.username}})};return(m,e)=>{const a=n("el-alert"),t=n("el-input"),i=n("el-form-item"),g=n("el-link"),k=n("el-checkbox"),E=n("el-button"),R=n("el-form");return y(),q("div",A,[d("div",F,[e[12]||(e[12]=d("div",{class:"register-header"},[d("h2",{class:"title"},"注册"),d("p",{class:"subtitle"},"创建您的账号以访问全部功能")],-1)),c.value?(y(),C(a,{key:0,title:c.value,type:"error","show-icon":"",class:"register-error"},null,8,["title"])):B("",!0),s(R,{ref_key:"formRef",ref:p,model:r.value,rules:P,"label-position":"top",class:"register-form"},{default:l(()=>[s(i,{label:"用户名",prop:"username"},{default:l(()=>[s(t,{modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.username=o),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(i,{label:"邮箱",prop:"email"},{default:l(()=>[s(t,{modelValue:r.value.email,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.email=o),placeholder:"请输入邮箱地址","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(i,{label:"密码",prop:"password"},{default:l(()=>[s(t,{modelValue:r.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.password=o),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{label:"确认密码",prop:"confirmPassword"},{default:l(()=>[s(t,{modelValue:r.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.confirmPassword=o),type:"password",placeholder:"请再次输入密码","prefix-icon":"Lock","show-password":"",onKeyup:M(w,["enter"])},null,8,["modelValue"])]),_:1}),s(i,{prop:"agreement"},{default:l(()=>[s(k,{modelValue:r.value.agreement,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.agreement=o)},{default:l(()=>[e[7]||(e[7]=u(" 我已阅读并同意 ")),s(g,{type:"primary",underline:!1},{default:l(()=>e[5]||(e[5]=[u("用户协议")])),_:1}),e[8]||(e[8]=u(" 和 ")),s(g,{type:"primary",underline:!1},{default:l(()=>e[6]||(e[6]=[u("隐私政策")])),_:1})]),_:1},8,["modelValue"])]),_:1}),s(i,null,{default:l(()=>[s(E,{type:"primary",loading:f.value,class:"register-button",onClick:w},{default:l(()=>e[9]||(e[9]=[u(" 注册 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),d("div",J,[d("p",null,[e[11]||(e[11]=u(" 已有账号？ ")),s(g,{type:"primary",underline:!1,onClick:_},{default:l(()=>e[10]||(e[10]=[u(" 立即登录 ")])),_:1})])])])])}}},G=U(K,[["__scopeId","data-v-e9143e5e"]]);export{G as default};
