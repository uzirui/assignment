import{_ as U,p as B,r as p,j as L,c as N,a as r,f as h,m as K,b as o,e as t,w as l,i as n,d as S,k as T,h as k,n as j}from"./index-j3DZukop.js";const E={class:"login-page"},F={class:"login-container"},I={class:"form-options"},M={class:"login-footer"},P={__name:"Login",setup(z){const c=S(),f=T(),_=B(),s=p({username:"",password:"",remember:!1}),i=p(!1),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度应在3-20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度应在6-20个字符之间",trigger:"blur"}]},d=p(null),g=L(()=>_.error),v=async()=>{d.value&&await d.value.validate(async y=>{if(y){i.value=!0;try{if(await _.login({username:s.value.username,password:s.value.password})){const m=f.query.redirect||"/";c.push(m)}}finally{i.value=!1}}})},x=()=>{c.push({path:"/register",query:f.query})};return(y,e)=>{const m=t("el-alert"),b=t("el-input"),u=t("el-form-item"),q=t("el-checkbox"),w=t("el-link"),C=t("el-button"),R=t("el-form");return k(),N("div",E,[r("div",F,[e[8]||(e[8]=r("div",{class:"login-header"},[r("h2",{class:"title"},"登录"),r("p",{class:"subtitle"},"登录您的账号以继续访问")],-1)),g.value?(k(),h(m,{key:0,title:g.value,type:"error","show-icon":"",class:"login-error"},null,8,["title"])):K("",!0),o(R,{ref_key:"formRef",ref:d,model:s.value,rules:V,"label-position":"top",class:"login-form"},{default:l(()=>[o(u,{label:"用户名",prop:"username"},{default:l(()=>[o(b,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.username=a),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(u,{label:"密码",prop:"password"},{default:l(()=>[o(b,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.password=a),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":"",onKeyup:j(v,["enter"])},null,8,["modelValue"])]),_:1}),o(u,null,{default:l(()=>[r("div",I,[o(q,{modelValue:s.value.remember,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.remember=a)},{default:l(()=>e[3]||(e[3]=[n("记住我")])),_:1},8,["modelValue"]),o(w,{type:"primary",underline:!1},{default:l(()=>e[4]||(e[4]=[n("忘记密码?")])),_:1})])]),_:1}),o(u,null,{default:l(()=>[o(C,{type:"primary",loading:i.value,class:"login-button",onClick:v},{default:l(()=>e[5]||(e[5]=[n(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),r("div",M,[r("p",null,[e[7]||(e[7]=n(" 还没有账号？ ")),o(w,{type:"primary",underline:!1,onClick:x},{default:l(()=>e[6]||(e[6]=[n(" 立即注册 ")])),_:1})])])])])}}},D=U(P,[["__scopeId","data-v-8c839aa2"]]);export{D as default};
