import{_ as X,j as z,r as v,o as Y,k as Z,l as L,c as d,a as t,m as Q,b as s,w as n,n as ee,e as l,f as C,F as b,g as V,d as te,h as c,u as ae,s as se,i as g,t as u}from"./index-j3DZukop.js";import{u as le}from"./article-CBd4WTgj.js";const oe={class:"article-list-page"},ne={class:"filter-container"},ce={class:"search-box"},ie={class:"tag-filter"},ue={class:"tag-list"},re={class:"article-list-container"},_e={key:1,class:"empty-state"},de={key:2,class:"article-list"},ve=["onClick"],pe={class:"article-content"},me={class:"article-title"},ge={class:"article-summary"},he={class:"article-meta"},fe={class:"meta-left"},ye={class:"author-name"},ke={class:"publish-date"},qe={class:"meta-right"},Ce={class:"meta-item"},be={class:"meta-item"},Ve={class:"meta-item"},Se={class:"article-tags"},Ae={class:"article-image"},xe={class:"image-placeholder"},Ne={key:0,class:"pagination-container"},Re={__name:"ArticleList",setup(De){const S=te(),r=Z(),f=le(),A=z(()=>f.articles),x=z(()=>f.totalArticles),o=v(1),N=v(10),y=v(!1),_=v(""),i=v(""),B=v([{name:"全部",value:""},{name:"技术",value:"技术"},{name:"前端",value:"前端"},{name:"Vue",value:"Vue"},{name:"React",value:"React"},{name:"后端",value:"后端"},{name:"数据库",value:"数据库"},{name:"设计",value:"设计"},{name:"产品",value:"产品"},{name:"职场",value:"职场"}]);Y(()=>{r.query.q&&(_.value=r.query.q),r.query.tag&&(i.value=r.query.tag),r.query.page&&(o.value=Number(r.query.page)),p()}),L(()=>r.query,e=>{e.q!==void 0&&e.q!==_.value&&(_.value=e.q||""),e.tag!==void 0&&e.tag!==i.value&&(i.value=e.tag||""),e.page!==void 0&&Number(e.page)!==o.value&&(o.value=Number(e.page)||1),p()},{deep:!0}),L(o,()=>{k(),p()});const p=async()=>{y.value=!0;try{await f.fetchArticles({page:o.value,limit:N.value,search:_.value,tag:i.value})}catch(e){console.error("获取文章列表失败:",e)}finally{y.value=!1}},R=()=>{o.value=1,k(),p()},P=e=>{i.value=e,o.value=1,k(),p()},T=e=>{o.value=e},k=()=>{const e={...r.query};_.value?e.q=_.value:delete e.q,i.value?e.tag=i.value:delete e.tag,o.value>1?e.page=o.value.toString():delete e.page,S.replace({query:e})},w=e=>{S.push(`/article/${e}`)};return(e,h)=>{const m=l("el-icon"),K=l("el-button"),$=l("el-input"),D=l("el-tag"),F=l("el-scrollbar"),j=l("el-skeleton"),E=l("el-empty"),I=l("el-avatar"),M=l("View"),U=l("ChatDotRound"),G=l("Star"),H=l("Picture"),J=l("el-image"),O=l("el-pagination");return c(),d("div",oe,[h[1]||(h[1]=t("div",{class:"page-header"},[t("h1",{class:"page-title"},"文章列表"),t("p",{class:"page-description"},"探索精彩的文章内容")],-1)),t("div",ne,[t("div",ce,[s($,{modelValue:_.value,"onUpdate:modelValue":h[0]||(h[0]=a=>_.value=a),placeholder:"搜索文章",clearable:"",onKeyup:ee(R,["enter"])},{append:n(()=>[s(K,{onClick:R},{default:n(()=>[s(m,null,{default:n(()=>[s(ae(se))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",ie,[s(F,null,{default:n(()=>[t("div",ue,[(c(!0),d(b,null,V(B.value,a=>(c(),C(D,{key:a.value,type:i.value===a.value?"primary":"info",effect:i.value===a.value?"dark":"plain",class:"tag-item",onClick:q=>P(a.value)},{default:n(()=>[g(u(a.name),1)]),_:2},1032,["type","effect","onClick"]))),128))])]),_:1})])]),t("div",re,[y.value?(c(),C(j,{key:0,rows:10,animated:""})):A.value.length===0?(c(),d("div",_e,[s(E,{description:"没有找到相关文章"})])):(c(),d("div",de,[(c(!0),d(b,null,V(A.value,a=>(c(),d("div",{key:a.id,class:"article-item",onClick:q=>w(a.id)},[t("div",pe,[t("h2",me,u(a.title),1),t("p",ge,u(a.summary),1),t("div",he,[t("div",fe,[s(I,{size:24,src:a.author.avatar},null,8,["src"]),t("span",ye,u(a.author.username),1),t("span",ke,u(new Date(a.createdAt).toLocaleDateString()),1)]),t("div",qe,[t("span",Ce,[s(m,null,{default:n(()=>[s(M)]),_:1}),g(" "+u(a.viewCount),1)]),t("span",be,[s(m,null,{default:n(()=>[s(U)]),_:1}),g(" "+u(a.commentCount),1)]),t("span",Ve,[s(m,null,{default:n(()=>[s(G)]),_:1}),g(" "+u(a.likeCount),1)])])]),t("div",Se,[(c(!0),d(b,null,V(a.tags,(q,W)=>(c(),C(D,{key:W,size:"small",class:"article-tag"},{default:n(()=>[g(u(q),1)]),_:2},1024))),128))])]),t("div",Ae,[s(J,{src:a.cover,fit:"cover"},{error:n(()=>[t("div",xe,[s(m,null,{default:n(()=>[s(H)]),_:1})])]),_:2},1032,["src"])])],8,ve))),128))]))]),x.value>0?(c(),d("div",Ne,[s(O,{background:"",layout:"prev, pager, next",total:x.value,"page-size":N.value,"current-page":o.value,onCurrentChange:T},null,8,["total","page-size","current-page"])])):Q("",!0)])}}},Be=X(Re,[["__scopeId","data-v-e1f81011"]]);export{Be as default};
